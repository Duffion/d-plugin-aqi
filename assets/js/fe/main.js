"use strict";function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(o)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}!function(){console.log("loading in widget helper d-aqi");var r=jQuery,n={targets:{},instance:{},readings:{},init:function(){this.define(),console.log("Loaded AQI widget",this)},define:function(){if(this.targets.widget=r("[data-aqinfo-widget]"),0<this.targets.widget.length){this.instance=JSON.parse(this.targets.widget.data("aqinfo")),this.build.aqi(),this.build.widget();var e,t=_createForOfIteratorHelper(document.getElementsByClassName("d-aqinfo--bubble"));try{for(t.s();!(e=t.n()).done;)e.value.addEventListener("click",this.clickAQI,!1)}catch(e){t.e(e)}finally{t.f()}}},loading:{remove:function(){n.targets.widget.find(".d-loading").remove()}},build:{aqi:function(){var e=n.instance,t=n.AQI.aqiFromPM(e.p_2_5_um),r=n.AQI.getAQIDescription(t),e=n.AQI.getAQIMessage(t);n.readings.aqi=t,n.readings.desc=r,n.readings.mesg=e},widget:function(){var e=n.readings,t=n.targets.widget;n.loading.remove(),console.log("reading",e),t.find(".d-aqinfo--cir-index").html(e.aqi),t.find(".d-aqinfo--cir-title").html(e.desc),t.find(".d-aqinfo--popover").html(e.mesg),t.find(".d-aqinfo--cir").attr("data-aqinfo-ranking",e.desc.toLowerCase()),t.find(".d-aqinfo--cir-bottom").attr("data-aqinfo-ranking",e.desc.toLowerCase())}},clickAQI:function(e){window.open("https://www.purpleair.com/map?opt=1/mAQI/a10/cC0&key=ONG0MQF1Y4RY4IHO&select=85827#14/39.31224/-120.15584","_blank")},AQI:{aqiFromPM:function(e){return isNaN(e)||null==e?"-":e<0?e:1e3<e?"-":350.5<e?n.AQI.calcAQI(e,500,401,500,350.5):250.5<e?n.AQI.calcAQI(e,400,301,350.4,250.5):150.5<e?n.AQI.calcAQI(e,300,201,250.4,150.5):55.5<e?n.AQI.calcAQI(e,200,151,150.4,55.5):35.5<e?n.AQI.calcAQI(e,150,101,55.4,35.5):12.1<e?n.AQI.calcAQI(e,100,51,35.4,12.1):0<=e?n.AQI.calcAQI(e,50,0,12,0):void 0},bplFromPM:function(e){return isNaN(e)||null==e||e<0?0:350.5<e?401:250.5<e?301:150.5<e?201:55.5<e?151:35.5<e?101:12.1<e?51:0},bphFromPM:function(e){return isNaN(e)||null==e||e<0?0:350.5<e||250.5<e?500:150.5<e?300:55.5<e?200:35.5<e?150:12.1<e?100:0<=e?50:0},calcAQI:function(e,t,r,n,i){return Math.round((t-r)/(n-i)*(e-i)+r)},getAQIDescription:function(e){return 401<=e||301<=e?"Hazardous":201<=e?"Very Unhealthy":151<=e?"Unhealthy":101<=e?"Unhealthy for Sensitive Groups":51<=e?"Moderate":0<=e?"Good":void 0},getAQIMessage:function(e){return 401<=e?">401: Health alert: everyone may experience more serious health effects":301<=e?"301-400: Health alert: everyone may experience more serious health effects":201<=e?"201-300: Health warnings of emergency conditions. The entire population is more likely to be affected. ":151<=e?"151-200: Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects.":101<=e?"101-150: Members of sensitive groups may experience health effects. The general public is not likely to be affected.":51<=e?"51-100: Air quality is acceptable; however, for some pollutants there may be a moderate health concern for a very small number of people who are unusually sensitive to air pollution.":0<=e?"0-50: Air quality is considered satisfactory, and air pollution poses little or no risk":void 0}}};r(function(){n.init()})}();
//# sourceMappingURL=main.js.map
