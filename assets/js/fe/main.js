"use strict";!function(){console.log("loading in widget helper d-aqi");var e=jQuery,n={targets:{},instance:{},readings:{},init:function(){this.define(),console.log("Loaded AQI widget",this)},define:function(){this.targets.widget=e("[data-aqinfo-widget]"),0<this.targets.widget.length&&(this.instance=JSON.parse(this.targets.widget.data("aqinfo")),this.build.aqi(),this.build.widget())},loading:{remove:function(){n.targets.widget.find(".d-loading").remove()}},build:{aqi:function(){var e=n.instance,i=n.AQI.aqiFromPM(e.p_2_5_um),t=n.AQI.getAQIDescription(i),e=n.AQI.getAQIMessage(i);n.readings.aqi=i,n.readings.desc=t,n.readings.mesg=e},widget:function(){var e=n.readings,i=n.targets.widget;n.loading.remove(),console.log("reading",e),i.find(".d-aqinfo--cir-index").html(e.aqi),i.find(".d-aqinfo--cir-title").html(e.desc),i.find(".d-aqinfo--popover").html(e.mesg),i.find(".d-aqinfo--cir").attr("data-aqinfo-ranking",e.desc.toLowerCase()),i.find(".d-aqinfo--cir-bottom").attr("data-aqinfo-ranking",e.desc.toLowerCase())}},AQI:{aqiFromPM:function(e){return isNaN(e)||null==e?"-":e<0?e:1e3<e?"-":350.5<e?n.AQI.calcAQI(e,500,401,500,350.5):250.5<e?n.AQI.calcAQI(e,400,301,350.4,250.5):150.5<e?n.AQI.calcAQI(e,300,201,250.4,150.5):55.5<e?n.AQI.calcAQI(e,200,151,150.4,55.5):35.5<e?n.AQI.calcAQI(e,150,101,55.4,35.5):12.1<e?n.AQI.calcAQI(e,100,51,35.4,12.1):0<=e?n.AQI.calcAQI(e,50,0,12,0):void 0},bplFromPM:function(e){return isNaN(e)||null==e||e<0?0:350.5<e?401:250.5<e?301:150.5<e?201:55.5<e?151:35.5<e?101:12.1<e?51:0},bphFromPM:function(e){return isNaN(e)||null==e||e<0?0:350.5<e||250.5<e?500:150.5<e?300:55.5<e?200:35.5<e?150:12.1<e?100:0<=e?50:0},calcAQI:function(e,i,t,n,a){return Math.round((i-t)/(n-a)*(e-a)+t)},getAQIDescription:function(e){return 401<=e||301<=e?"Hazardous":201<=e?"Very Unhealthy":151<=e?"Unhealthy":101<=e?"Unhealthy for Sensitive Groups":51<=e?"Moderate":0<=e?"Good":void 0},getAQIMessage:function(e){return 401<=e?">401: Health alert: everyone may experience more serious health effects":301<=e?"301-400: Health alert: everyone may experience more serious health effects":201<=e?"201-300: Health warnings of emergency conditions. The entire population is more likely to be affected. ":151<=e?"151-200: Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects.":101<=e?"101-150: Members of sensitive groups may experience health effects. The general public is not likely to be affected.":51<=e?"51-100: Air quality is acceptable; however, for some pollutants there may be a moderate health concern for a very small number of people who are unusually sensitive to air pollution.":0<=e?"0-50: Air quality is considered satisfactory, and air pollution poses little or no risk":void 0}}};e(function(){n.init()})}();
//# sourceMappingURL=main.js.map
