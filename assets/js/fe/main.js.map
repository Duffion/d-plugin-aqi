{"version":3,"sources":["main.js"],"names":["console","log","e","jQuery","i","targets","instance","readings","init","this","define","widget","length","JSON","parse","data","build","aqi","_step","_iterator","_createForOfIteratorHelper","document","getElementsByClassName","s","n","done","value","addEventListener","clickAQI","err","f","loading","remove","find","t","AQI","aqiFromPM","p_2_5_um","getAQIDescription","a","getAQIMessage","desc","mesg","html","attr","toLowerCase","window","open","isNaN","calcAQI","bplFromPM","bphFromPM","Math","round"],"mappings":"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","file":"main.js","sourcesContent":["(()=>{console.log(\"loading in widget helper d-aqi\");let e=jQuery,i={targets:{},instance:{},readings:{},init:function(){this.define(),console.log(\"Loaded AQI widget\",this)},define:function(){if(this.targets.widget=e(\"[data-aqinfo-widget]\"),this.targets.widget.length>0){this.instance=JSON.parse(this.targets.widget.data(\"aqinfo\")),this.build.aqi(),this.build.widget();var i=document.getElementsByClassName(\"d-aqinfo--bubble\");for(const e of i)e.addEventListener(\"click\",this.clickAQI,!1)}},loading:{remove:function(){i.targets.widget.find(\".d-loading\").remove()}},build:{aqi:function(){var e=i.instance,t=i.AQI.aqiFromPM(e.p_2_5_um),n=i.AQI.getAQIDescription(t),a=i.AQI.getAQIMessage(t);i.readings.aqi=t,i.readings.desc=n,i.readings.mesg=a},widget:function(){var e=i.readings,t=i.targets.widget;i.loading.remove(),console.log(\"reading\",e),t.find(\".d-aqinfo--cir-index\").html(e.aqi),t.find(\".d-aqinfo--cir-title\").html(e.desc),t.find(\".d-aqinfo--popover\").html(e.mesg),t.find(\".d-aqinfo--cir\").attr(\"data-aqinfo-ranking\",e.desc.toLowerCase()),t.find(\".d-aqinfo--cir-bottom\").attr(\"data-aqinfo-ranking\",e.desc.toLowerCase())}},clickAQI:function(e){window.open(\"https://www.purpleair.com/map?opt=1/mAQI/a10/cC0&key=ONG0MQF1Y4RY4IHO&select=85827#14/39.31224/-120.15584\",\"_blank\")},AQI:{aqiFromPM:function(e){return isNaN(e)||null==e?\"-\":e<0?e:e>1e3?\"-\":e>350.5?i.AQI.calcAQI(e,500,401,500,350.5):e>250.5?i.AQI.calcAQI(e,400,301,350.4,250.5):e>150.5?i.AQI.calcAQI(e,300,201,250.4,150.5):e>55.5?i.AQI.calcAQI(e,200,151,150.4,55.5):e>35.5?i.AQI.calcAQI(e,150,101,55.4,35.5):e>12.1?i.AQI.calcAQI(e,100,51,35.4,12.1):e>=0?i.AQI.calcAQI(e,50,0,12,0):void 0},bplFromPM:function(e){return isNaN(e)||null==e||e<0?0:e>350.5?401:e>250.5?301:e>150.5?201:e>55.5?151:e>35.5?101:e>12.1?51:0},bphFromPM:function(e){return isNaN(e)||null==e||e<0?0:e>350.5||e>250.5?500:e>150.5?300:e>55.5?200:e>35.5?150:e>12.1?100:e>=0?50:0},calcAQI:function(e,i,t,n,a){var o=i-t,r=n-a,s=e-a;return Math.round(o/r*s+t)},getAQIDescription:function(e){return e>=401||e>=301?\"Hazardous\":e>=201?\"Very Unhealthy\":e>=151?\"Unhealthy\":e>=101?\"Unhealthy for Sensitive Groups\":e>=51?\"Moderate\":e>=0?\"Good\":void 0},getAQIMessage:function(e){return e>=401?\">401: Health alert: everyone may experience more serious health effects\":e>=301?\"301-400: Health alert: everyone may experience more serious health effects\":e>=201?\"201-300: Health warnings of emergency conditions. The entire population is more likely to be affected. \":e>=151?\"151-200: Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects.\":e>=101?\"101-150: Members of sensitive groups may experience health effects. The general public is not likely to be affected.\":e>=51?\"51-100: Air quality is acceptable; however, for some pollutants there may be a moderate health concern for a very small number of people who are unusually sensitive to air pollution.\":e>=0?\"0-50: Air quality is considered satisfactory, and air pollution poses little or no risk\":void 0}}};e((function(){i.init()}))})();"]}