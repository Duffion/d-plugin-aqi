{"version":3,"sources":["main.js"],"names":["console","log","e","jQuery","i","targets","instance","readings","init","this","define","widget","length","JSON","parse","data","build","aqi","loading","remove","find","t","AQI","aqiFromPM","p_2_5_um","n","getAQIDescription","a","getAQIMessage","desc","mesg","html","attr","toLowerCase","isNaN","calcAQI","bplFromPM","bphFromPM","Math","round"],"mappings":"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","file":"main.js","sourcesContent":["(()=>{console.log(\"loading in widget helper d-aqi\");let e=jQuery,i={targets:{},instance:{},readings:{},init:function(){this.define(),console.log(\"Loaded AQI widget\",this)},define:function(){this.targets.widget=e(\"[data-aqinfo-widget]\"),this.targets.widget.length>0&&(this.instance=JSON.parse(this.targets.widget.data(\"aqinfo\")),this.build.aqi(),this.build.widget())},loading:{remove:function(){i.targets.widget.find(\".d-loading\").remove()}},build:{aqi:function(){var e=i.instance,t=i.AQI.aqiFromPM(e.p_2_5_um),n=i.AQI.getAQIDescription(t),a=i.AQI.getAQIMessage(t);i.readings.aqi=t,i.readings.desc=n,i.readings.mesg=a},widget:function(){var e=i.readings,t=i.targets.widget;i.loading.remove(),console.log(\"reading\",e),t.find(\".d-aqinfo--cir-index\").html(e.aqi),t.find(\".d-aqinfo--cir-title\").html(e.desc),t.find(\".d-aqinfo--popover\").html(e.mesg),t.find(\".d-aqinfo--cir\").attr(\"data-aqinfo-ranking\",e.desc.toLowerCase()),t.find(\".d-aqinfo--cir-bottom\").attr(\"data-aqinfo-ranking\",e.desc.toLowerCase())}},AQI:{aqiFromPM:function(e){return isNaN(e)||null==e?\"-\":e<0?e:e>1e3?\"-\":e>350.5?i.AQI.calcAQI(e,500,401,500,350.5):e>250.5?i.AQI.calcAQI(e,400,301,350.4,250.5):e>150.5?i.AQI.calcAQI(e,300,201,250.4,150.5):e>55.5?i.AQI.calcAQI(e,200,151,150.4,55.5):e>35.5?i.AQI.calcAQI(e,150,101,55.4,35.5):e>12.1?i.AQI.calcAQI(e,100,51,35.4,12.1):e>=0?i.AQI.calcAQI(e,50,0,12,0):void 0},bplFromPM:function(e){return isNaN(e)||null==e||e<0?0:e>350.5?401:e>250.5?301:e>150.5?201:e>55.5?151:e>35.5?101:e>12.1?51:0},bphFromPM:function(e){return isNaN(e)||null==e||e<0?0:e>350.5||e>250.5?500:e>150.5?300:e>55.5?200:e>35.5?150:e>12.1?100:e>=0?50:0},calcAQI:function(e,i,t,n,a){var o=i-t,r=n-a,s=e-a;return Math.round(o/r*s+t)},getAQIDescription:function(e){return e>=401||e>=301?\"Hazardous\":e>=201?\"Very Unhealthy\":e>=151?\"Unhealthy\":e>=101?\"Unhealthy for Sensitive Groups\":e>=51?\"Moderate\":e>=0?\"Good\":void 0},getAQIMessage:function(e){return e>=401?\">401: Health alert: everyone may experience more serious health effects\":e>=301?\"301-400: Health alert: everyone may experience more serious health effects\":e>=201?\"201-300: Health warnings of emergency conditions. The entire population is more likely to be affected. \":e>=151?\"151-200: Everyone may begin to experience health effects; members of sensitive groups may experience more serious health effects.\":e>=101?\"101-150: Members of sensitive groups may experience health effects. The general public is not likely to be affected.\":e>=51?\"51-100: Air quality is acceptable; however, for some pollutants there may be a moderate health concern for a very small number of people who are unusually sensitive to air pollution.\":e>=0?\"0-50: Air quality is considered satisfactory, and air pollution poses little or no risk\":void 0}}};e((function(){i.init()}))})();"]}